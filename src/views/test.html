<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>全景图渲染</title>
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0">
    <meta http-equiv="Pragma" content="no-cache">
    <meta name="applicable-device" content="mobile">
    <!--下载到本地的基础依赖-->
    <link rel="stylesheet" href="./js/photo-sphere-viewer.min.css"/>
    <script src="./js/three.min.js"></script>
    <script src="./js/browser.min.js"></script>
    <script src="./js/photo-sphere-viewer.min.js"></script>
    <script src="./js/plugins/markers.js"></script>
<style>
 #container {
    margin-top:10vh;
    width: 100vw;
    height: 70vh;
  }
</style>
</head>
<body>
<!--容器-->
    <div id="container"></div>
    <script >
        window.onload=function(){
            init();
        }
        //全景图参数配置函数
        function init(){
            var viewer = new Viewer({
            //全景图位置
            container: 'container',
            //默认就是true
            navbar: true,
            //全景图自动开始旋转之前的空闲时间（毫秒）
            autorotateDelay: false,
            //旋转速度
            autorotateSpeed: '3rpm',
            //导航栏右边的提示问题
            caption: '演示',
            defaultLat: 0.3,
            panorama: 'https://wangsr-oss-files.oss-cn-beijing.aliyuncs.com/images/%E5%85%A8%E6%99%AF/Bryce-Canyon-By-Jess-Beauchemin.jpg',
            plugins: [
                PhotoSphereViewer.AutorotateKeypointsPlugin,
                PhotoSphereViewer.MarkersPlugin,
              ],
          });
          //插件 点击则生成一个位置
          var markersPlugin = viewer.getPlugin(PhotoSphereViewer.MarkersPlugin);
          viewer.on('click', function(e, data) {
          console.log(data)
          if (!data.rightclick) {
            markersPlugin.addMarker({
              id: '#' + Math.random(),
              longitude: data.longitude,
              latitude: data.latitude,
              html: '&hearts;',
              width: 40,
              height: 40,
              anchor: 'bottom center',
              tooltip: '随机点',
              data: {
                generated: true
              }
            });
          }
        }); 
        //双击取消生成的点
        markersPlugin.on('select-marker', function(e, marker, data) {
          if (marker.data && marker.data.generated) {
            if (data.dblclick) {
              markersPlugin.removeMarker(marker);
            } else if (data.rightclick) {
              markersPlugin.updateMarker({
                id: marker.id,
                image: 'https://photo-sphere-viewer.js.org/assets/pin-blue.png',
              });
            }
          }
        })
        }
    </script>
</body>
</html>